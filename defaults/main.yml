---
# Days of Openvpn Logs to keep (Modifies the logrotate step)
days_to_keep: 30

# CIDR - classless interdomain routing
create_gateways: true

# Allow VPN Clients to talk to each other
permit_client_to_client: false

# Block the local subnet from clients that are trying to connect
block_local_subnet: true

# VPN Config
vpn_cidr: '10.2.0.0/24'
vpn_gateway: '10.2.0.1'
vpn_mask: '10.2.0.0 255.255.255.0'

# Instances of openvpn to run
openvpn_instances:
  - proto: udp
    port: 1194
    mask: "{{ vpn_mask }}"
    cidr: "{{ vpn_cidr }}"
    gateway: "{{ vpn_gateway }}"
    client_gateways:
      - name: "gateway30"
        ipaddress: 10.2.0.240
        cidr: '192.168.30.0/24'
        fullyqualified: '192.168.30.0 255.255.255.0'
      - name: "gateway31"
        ipaddress: 10.2.0.241
        cidr: '192.168.31.0/24'
        fullyqualified: '192.168.31.0 255.255.255.0'

  # - proto: tcp
  #   port: 443
  #   mask: "{{ vpn_mask }}"
  #   cidr: "{{ vpn_cidr }}"
  #   gateway: "{{ vpn_gateway }}"
  #   client_gateways:
  #     - name: "gateway32"
  #       ipaddress: 10.2.0.242
  #       cidr: '192.168.32.0/24'
  #       fullyqualified: '192.168.32.0 255.255.255.0'
  #     - name: "gateway33"
  #       ipaddress: 10.2.0.243
  #       cidr: '192.168.33.0/24'
  #       fullyqualified: '192.168.33.0 255.255.255.0'


# Crypto
openvpn_auth_digest: SHA384
openvpn_cipher: AES-256-GCM
openvpn_tls_cipher: >-
  TLS-ECDHE-ECDSA-WITH-AES-256-GCM-SHA384
upstream_dns_servers:
  - 9.9.9.9
  - 1.1.1.1

local_vpn_cert: '{{ pki_dir }}/vpn.pem'
local_vpn_key: '{{ pki_dir }}/vpn.key'
local_takey: '{{ pki_dir }}/ta.key'
local_crl: '{{ pki_dir }}/crl.pem'
local_ca: '{{ pki_dir }}/ca.pem'
local_dh: '{{ pki_dir }}/dh.pem'
